<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin_mapper">

	<!--회원 정보 찾기-->
	<select id="findUserList" resultType="User">
		SELECT * FROM MEMBERS
	</select>
	
	
	<select id="findUserListBySearchCondition" parameterType="User" resultType="UserSerachCondition">
		SELECT * FROM MEMBERS
		WHERE 1 = 1
		<if test="memberId != null and memberId != ''">
			AND member_id = #{searchKeyword}
		</if>
		
		<if test="userId != null and userId!= ''">
			AND user_id = #{searchKeyword}
		</if>
		
		<if test="userPassword != null and userPassword!= ''">
			AND user_password = #{searchKeyword}
		</if>
		
		<if test="userName != null and userName!= ''">
			AND user_name = #{searchKeyword}
		</if>
		
		<if test="userNickname != null and userNickname!= ''">
			AND user_nickname = #{searchKeyword}
		</if>
		
		<if test="birthYear != null and birthYear!= ''">
			AND substr(user_birthdate, 1, 4) = #{searchKeyword}
		</if>
		
		<if test="birthMonth != null and birthMonth!= ''">
			AND substr(user_birthdate, 6, 2) = #{searchKeyword}
		</if>
		
		<if test="birthDate != null and birthDate!= ''">
			AND substr(user_birthdate, 9, 2) = #{searchKeyword}
		</if>
		
		<if test="tel1 != null and tel1!= ''">
			AND substr(user_tel, 1,3 ) =  #{searchKeyword}
		</if>
		
		<if test="tel2 != null and tel2!= ''">
			AND substr(user_tel, 5,4 ) =  #{searchKeyword}
		</if>
		
		<if test="tel3 != null and tel3!= ''">
			AND substr(user_tel, 10, 4) =  #{searchKeyword}
		</if>
		
		<if test="addressSystem != null and addressSystem!= ''">
			AND substr(user_address, 1, instr(user_address, ' ') -1) = #{searchKeyword}
		</if>
		
		<if test="myAddress != null and myAddress!= ''">
			AND SUBSTR(user_address, INSTR(user_address, ' ') + 1) = #{searchKeyword}
		</if>
		
		<if test="myEmail != null and myEmail != ''">
			AND SUBSTR(user_email, 1, INSTR(user_email, '@') - 1) = #{searchKeyword}
		</if>
		
		<if test="emailSystem != null and emailSystem != ''">
			AND SUBSTR(user_email, INSTR(user_email, '@') + 1) = #{searchKeyword}
		</if>
		
		<if test="etcEmail != null and etcEmail != ''">
			AND SUBSTR(user_email, INSTR(user_email, '@') + 1) = #{searchKeyword}
		</if>
	</select>
</mapper>